{"version":3,"sources":["components/PocketBtn.js","components/Header.js","components/Menu.js","components/Card.js","components/Slider.js","functions.js","components/NewsContainer.js","App.js","serviceWorker.js","index.js"],"names":["PocketBtn","savedCount","onClick","pocket","useEffect","window","scrollTo","className","Header","style","openPocket","count","Menu","open","categories","handleClick","selected","handleInput","handleSubmit","input","wraperRef","btns","map","el","i","key","name","margin","ref","marginLeft","onSubmit","value","placeholder","onChange","e","target","required","type","fontSize","Card","news","useState","setSelected","image","href","url","backgroundImage","contentUrl","backgroundSize","backgroundRepeat","backgroundPosition","description","provider","width","src","thumbnail","alt","color","Slider","level","onSlide","politicalView","onSelect","active","id","htmlFor","disabled","min","max","data","require","leftNews","filter","rating","news_source","rightNews","neutralNews","filteredSources","left","center","right","yesterday","Date","toJSON","slice","setDate","getDate","NewsContainer","loading","error","selectCard","backToFeed","setLevel","setView","filtredData","setFiltred","sliderIsActive","setActive","forEach","indexOf","listitems","JSON","stringify","length","HeaderStyle","backgroundColor","height","App","useRef","setData","savedData","saveData","setOpen","selectedCat","setInput","setPocket","setLoading","setError","clickOtsideEvent","current","contains","document","addEventListener","removeEventListener","root","getElementById","overflow","paddingRight","uri","fetch","method","headers","process","then","res","json","element","uuidv4","parse","localStorage","getItem","setItem","category","preventDefault","console","log","source","some","Boolean","location","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"4gvOAGe,SAASA,EAAT,GAA2D,IAAD,IAArCC,kBAAqC,MAAxB,IAAwB,EAAnBC,EAAmB,EAAnBA,QAASC,EAAU,EAAVA,OAI7D,OAHAC,qBAAU,WACRC,OAAOC,SAAS,EAAG,KAClB,CAACH,IAEF,yBAAKD,QAAS,kBAAMA,KAAWK,UAAU,UACtCJ,EACC,kBAAC,IAAD,MAEA,oCACE,kBAAC,IAAD,MACA,4BAAKF,KCVA,SAASO,EAAT,GAAsD,EAApCC,MAAqC,IAA9BC,EAA6B,EAA7BA,WAAYP,EAAiB,EAAjBA,OAAQQ,EAAS,EAATA,MAC1D,OACE,yBAAKJ,UAAU,cACb,2CACA,0BAAMA,UAAU,YAAhB,uBACA,kBAACP,EAAD,CAAWE,QAASQ,EAAYP,OAAQA,EAAQF,WAAYU,K,WCNnD,SAASC,EAAT,GASX,IARFC,EAQC,EARDA,KACAC,EAOC,EAPDA,WACAC,EAMC,EANDA,YACAC,EAKC,EALDA,SACAC,EAIC,EAJDA,YACAC,EAGC,EAHDA,aACAC,EAEC,EAFDA,MACAC,EACC,EADDA,UAEMC,EAAOP,EAAWQ,KAAI,SAACC,EAAIC,GAAL,OAC1B,4BACEC,IAAKD,EACLjB,UAAWS,IAAaO,EAAK,aAAe,MAC5CrB,QAAS,kBAAMa,EAAYQ,IAC3BG,KAAMH,GAELA,MAGCI,EAASd,EAAO,EAAI,OAC1B,OACE,yBAAKe,IAAKR,EAAWX,MAAO,CAAEoB,WAAYF,GAAUpB,UAAU,cAC5D,0BAAMuB,SAAUZ,EAAcX,UAAU,eACtC,2BACEA,UAAU,eACVwB,MAAOZ,EACPa,YAAY,gBACZC,SAAU,SAACC,GAAD,OAAOjB,EAAYiB,EAAEC,OAAOJ,QACtCK,UAAQ,IAEV,2BAAO7B,UAAU,cACf,2BAAOA,UAAU,aAAa8B,KAAK,WACnC,kBAAC,IAAD,CAAU5B,MAAO,CAAE6B,SAAU,cAIjC,0DACCjB,G,MCpCQ,SAASkB,EAAT,GAA0C,IAA1BC,EAAyB,EAAzBA,KAAMtC,EAAmB,EAAnBA,QAASC,EAAU,EAAVA,OAAU,EACtBsC,oBAAS,GADa,mBAC/CzB,EAD+C,KACrC0B,EADqC,KAEtD,OACE,wBAAInC,UAAU,aACXiC,EAAKG,MACJ,uBACEpC,UAAU,cACVqC,KAAMJ,EAAKK,IACXpC,MAAO,CACLqC,gBAAgB,OAAD,OAASN,EAAKG,MAAMI,WAApB,KACfC,eAAgB,QAChBC,iBAAkB,YAClBC,mBAAoB,QAGrBV,EAAKd,MAEN,KACJ,uBAAGkB,KAAMJ,EAAKK,KACZ,4BAAKL,EAAKd,OAEZ,2BAAIc,EAAKW,aACT,yBAAK5C,UAAU,iBACb,yBAAKA,UAAU,UACZiC,EAAKY,SAAS,GAAGT,MAChB,yBACElC,MAAO,CAAE4C,MAAO,IAChB9C,UAAU,eACV+C,IAAKd,EAAKY,SAAS,GAAGT,MAAMY,UAAUR,WACtCS,IAAKhB,EAAKY,SAAS,GAAG1B,OAEtB,KACJ,4BAAKc,EAAKY,SAAS,GAAG1B,OAExB,yBACExB,QAAS,WAEP,OADAwC,GAAa1B,GACNd,EAAQsC,KAGfrC,EAGA,kBAAC,IAAD,CAASsD,MAAO,YAFfzC,GAAY,kBAAC,IAAD,OAAmB,kBAAC,IAAD,S,MC3C7B,SAAS0C,EAAT,GAMX,IALFC,EAKC,EALDA,MACAC,EAIC,EAJDA,QACAC,EAGC,EAHDA,cACAC,EAEC,EAFDA,SACAC,EACC,EADDA,OAEA,OACE,yBAAKxD,UAAU,UACb,2BACE8B,KAAK,WACL2B,GAAG,SACHzD,UAAU,WACV0B,SAAU,kBAAM6B,OAElB,2BAAOG,QAAQ,SAAS1D,UAAU,WAClC,2BACE2D,UAAWH,EACX1B,KAAK,QACL8B,IAAI,IACJC,IAAI,MACJrC,MAAO4B,EACP1B,SAAU2B,IAEXG,EACC,yBAAKxD,UAAU,eACb,uDACA,0BAAMA,UAAU,QAAQsD,IAG1B,+FACoE,MClC5E,IAAMQ,EAAOC,EAAQ,IAGfC,EAAWF,EACdG,QAAO,SAACjD,GAAD,MAAsB,SAAdA,EAAGkD,QAAmC,gBAAdlD,EAAGkD,UAC1CnD,KAAI,SAACC,GAAD,OAAQA,EAAGmD,eAEZC,EAAYN,EACfG,QAAO,SAACjD,GAAD,MAAsB,UAAdA,EAAGkD,QAAoC,iBAAdlD,EAAGkD,UAC3CnD,KAAI,SAACC,GAAD,OAAQA,EAAGmD,eAEZE,EAAcP,EACjBG,QAAO,SAACjD,GAAD,MAAsB,WAAdA,EAAGkD,UAClBnD,KAAI,SAACC,GAAD,OAAQA,EAAGmD,eAELG,EAAkB,CAC7BC,KAAK,YAAKP,GACVQ,OAAO,YAAKH,GACZI,MAAM,YAAKL,IAGPM,IADY,IAAIC,MAAOC,SAASC,MAAM,EAAG,IAC7B,IAAIF,MACtBD,EAAUI,QAAQJ,EAAUK,UAAY,GACpBL,EAAUE,SAASC,MAAM,EAAG,I,MCjBjC,SAASG,EAAT,GAOX,IANFlB,EAMC,EANDA,KACAmB,EAKC,EALDA,QACAC,EAIC,EAJDA,MACAC,EAGC,EAHDA,WACAvF,EAEC,EAFDA,OACAwF,EACC,EADDA,WACC,EACyBlD,mBAAS,MADlC,mBACMkB,EADN,KACaiC,EADb,OAEgCnD,mBAAS,UAFzC,mBAEMoB,EAFN,KAEqBgC,EAFrB,OAGiCpD,mBAAS,IAH1C,mBAGMqD,EAHN,KAGmBC,EAHnB,OAImCtD,oBAAS,GAJ5C,mBAIMuD,EAJN,KAIsBC,EAJtB,KAMD7F,qBAAU,WACHiE,IACL0B,EAAW,IACX1B,EAAK6B,SAAQ,SAAC3E,GACRpB,EACF4F,GAAW,SAACD,GAAD,4BAAqBA,GAArB,CAAkCvE,OAExCyE,EAGHnB,EAAgBhB,GAAesC,QAAQ5E,EAAG6B,SAAS,GAAG1B,OAAS,GAE/DqE,GAAW,SAACD,GAAD,4BAAqBA,GAArB,CAAkCvE,OAJ7CwE,GAAW,SAACD,GAAD,4BAAqBA,GAArB,CAAkCvE,aAQlD,CAACsC,EAAeQ,EAAM2B,EAAgB7F,IAEzCC,qBAAU,WAENyF,EADElC,GAAS,IAAMA,GAAS,GAClB,SACCA,GAAS,GACV,QACK,UACd,CAACA,IAEJ,IAAMyC,EAAYN,EAAYxE,KAAI,SAACC,GAAD,OAChC,kBAACgB,EAAD,CAAMd,IAAKF,EAAGyC,GAAIxB,KAAMjB,EAAIrB,QAASwF,EAAYvF,OAAQA,OAE3D,OAAIqF,EAAgB,uCAChBC,EAAc,6BAAMY,KAAKC,UAAUb,EAAO,KAAM,IAC/CpB,EAEH,yBAAK9D,UAAW,oBACd,wBAAIA,UAAS,yBAAoBJ,EAAS,SAAW,OAClD,IACCA,EASA,yBAAKI,UAAU,SACb,uGAIiB,IAAhB8D,EAAKkC,QACJ,0GAGE,4BAAQrG,QAAS,kBAAMyF,MAAvB,kBAjBN,kBAACjC,EAAD,CACEC,MAAOA,EACPE,cAAeA,EACfD,QAAS,SAAC1B,GAAD,OAAO0D,EAAS1D,EAAEC,OAAOJ,QAClC+B,SA1Ca,kBAAMmC,GAAWD,IA2C9BjC,OAAQiC,IAiBXI,EAAW,MA5BA,K,YCzCdI,G,MAAc,CAClBC,gBAAiB,OACjBC,OAAQ,KA8JKC,MA1Jf,WACE,IAAMvF,EAAYwF,iBAAO,MADZ,EAEWnE,qBAFX,mBAEN4B,EAFM,KAEAwC,EAFA,OAGiBpE,mBAAS,IAH1B,mBAGNqE,EAHM,KAGKC,EAHL,OAIWtE,oBAAS,GAJpB,mBAIN5B,EAJM,KAIAmG,EAJA,OAKsBvE,mBAAS,YAL/B,mBAKNwE,EALM,KAKOvE,EALP,OAMaD,mBAAS,IANtB,mBAMNtB,EANM,KAMC+F,EAND,OAOezE,oBAAS,GAPxB,mBAONtC,EAPM,KAOEgH,EAPF,OAQQ1E,mBAAS,CAC5B,WACA,KACA,WACA,SACA,QACA,WACA,UAPK3B,EARM,sBAkBiB2B,oBAAS,GAlB1B,mBAkBN+C,EAlBM,KAkBG4B,EAlBH,OAmBa3E,qBAnBb,mBAmBNgD,EAnBM,KAmBC4B,EAnBD,KAsBbjH,qBAAU,WACR,GAAIS,EAAM,CAAC,IACAyG,EAAT,SAA0BpF,GACpBd,EAAUmG,UAAYnG,EAAUmG,QAAQC,SAAStF,EAAEC,SACrD6E,GAAQ,IAKZ,OADAS,SAASC,iBAAiB,YAAaJ,GAChC,WAGLG,SAASE,oBAAoB,YAAaL,OAG7C,CAAClG,EAAWP,IAGf,IAAMH,EAAa,kBAAMyG,GAAWhH,IA0EpC,OAhDAC,qBAAU,WACR,IAAMwH,EAAOH,SAASI,eAAe,QACjChH,GACF+G,EAAKnH,MAAMqH,SAAW,SACtBF,EAAKnH,MAAMsH,aAAe,SAE1BH,EAAKnH,MAAMqH,SAAW,UACtBF,EAAKnH,MAAMsH,aAAe,OAE3B,CAAClH,IAGJT,qBAAU,WACR,IAAM4H,EAAG,oFAAgFf,EAAhF,oCACTG,GAAW,GACXa,MAAMD,EAAK,CACTE,OAAQ,MACRC,QAAS,CACP,4BAA6BC,UAC7B,kBAAmB,QAGpBC,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MACC,SAACC,GACCA,EAAIvG,MAAMmE,SAAQ,SAACsC,GAAD,OAAcA,EAAQxE,GAAKyE,iBAC7C5B,EAAQyB,EAAIvG,UAEd,SAAC0D,GACC4B,EAAS5B,MAIZ4C,KAAKjB,GAAW,MAClB,CAACH,IAEJ7G,qBAAU,WACR,IAxGUqB,EAwGJ4C,GAxGI5C,EAwGQ,SAxGO4E,KAAKqC,MAAMC,aAAaC,QAAQnH,IAyGrD4C,GAAQA,EAAKkC,OAAS,GACxBQ,EAAS1C,KAEV,IACHjE,qBAAU,WACJ0G,GACF6B,aAAaE,QAAQ,OAAQxC,KAAKC,UAAUQ,MAE7C,CAACA,IAGF,oCACE,kBAACtG,EAAD,CACEC,MAAO+F,EACP9F,WAAYA,EACZP,OAAQA,EACRQ,MAAOmG,EAAUP,SAEnB,yBAAKhG,UAAW,UAAWL,QAAS,SAACgC,GAAD,OAAO8E,GAASnG,KAChDA,EAAoB,kBAAC,IAAD,MAAb,kBAAC,IAAD,OAEX,kBAACD,EAAD,CACEC,KAAMA,EACNC,WAAYA,EACZE,SAAUiG,EACVlG,YAvFY,SAAC+H,GACjB9B,GAAQ,GACRtE,EAAYoG,IAsFR7H,YAzEc,SAACc,GAAD,OAAWmF,EAASnF,IA0ElCb,aAzEe,SAACgB,GACpBA,EAAE6G,iBACFrG,EAAYvB,GACZ+F,EAAS,IACTF,GAAQ,IAsEJ7F,MAAOA,EACPC,UAAWA,IAGX,kBAACmE,EAAD,CACErF,QAAS,SAACgC,GACR8G,QAAQC,IAAI/G,EAAEC,QACdtB,GAAQmG,GAAQ,IAElB7G,OAAQA,EACR2G,UAAW,KACXzC,KAAOlE,EAAgB2G,EAAPzC,EAChBoB,MAAOA,EACPD,QAASA,EACTE,WAlGW,SAACwD,GACbpC,EAAUqC,MAAK,SAAC5H,GAAD,OAAQA,EAAGyC,KAAOkF,EAAOlF,MAG3C+C,EAASD,EAAUtC,QAAO,SAACjD,GAAD,OAAQA,EAAGyC,KAAOkF,EAAOlF,OAFnD+C,EAAS,GAAD,mBAAKD,GAAL,CAAgBoC,MAiGpBvD,WAAYjF,MCtJF0I,QACW,cAA7B/I,OAAOgJ,SAASC,UAEe,UAA7BjJ,OAAOgJ,SAASC,UAEhBjJ,OAAOgJ,SAASC,SAASC,MACvB,2DCXNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFjC,SAASI,eAAe,SDwHpB,kBAAmB8B,WACrBA,UAAUC,cAAcC,MACrBxB,MAAK,SAAAyB,GACJA,EAAaC,gBAEdC,OAAM,SAAAvE,GACLuD,QAAQvD,MAAMA,EAAMwE,c","file":"static/js/main.508955ce.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport { BsFillBookmarksFill, BsArrowLeftShort } from \"react-icons/bs\";\n\nexport default function PocketBtn({ savedCount = \"0\", onClick, pocket }) {\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pocket]);\n  return (\n    <div onClick={() => onClick()} className=\"pocket\">\n      {pocket ? (\n        <BsArrowLeftShort />\n      ) : (\n        <>\n          <BsFillBookmarksFill />\n          <h3>{savedCount}</h3>\n        </>\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport \"../css/header.scss\";\nimport PocketBtn from \"./PocketBtn\";\n\nexport default function Header({ style, openPocket, pocket, count }) {\n  return (\n    <div className=\"app-header\">\n      <h1>News Pocket</h1>\n      <span className=\"tag-line\"> Only What Matters </span>\n      <PocketBtn onClick={openPocket} pocket={pocket} savedCount={count} />\n    </div>\n  );\n}\n","import React from \"react\";\nimport { MdSearch } from \"react-icons/md\";\n\nexport default function Menu({\n  open,\n  categories,\n  handleClick,\n  selected,\n  handleInput,\n  handleSubmit,\n  input,\n  wraperRef,\n}) {\n  const btns = categories.map((el, i) => (\n    <button\n      key={i}\n      className={selected === el ? \"btn active\" : \"btn\"}\n      onClick={() => handleClick(el)}\n      name={el}\n    >\n      {el}\n    </button>\n  ));\n  const margin = open ? 0 : \"-80%\";\n  return (\n    <nav ref={wraperRef} style={{ marginLeft: margin }} className=\"global-nav\">\n      <form onSubmit={handleSubmit} className=\"search-form\">\n        <input\n          className=\"search-field\"\n          value={input}\n          placeholder=\"search topics\"\n          onChange={(e) => handleInput(e.target.value)}\n          required\n        />\n        <label className=\"submit-btn\">\n          <input className=\"submit-btn\" type=\"submit\" />\n          <MdSearch style={{ fontSize: \"2.5rem\" }} />\n        </label>\n      </form>\n\n      <h3>Choose category to display</h3>\n      {btns}\n    </nav>\n  );\n}\n","import React, { useState } from \"react\";\nimport \"../css/card.scss\";\nimport { MdBookmark, MdBookmarkBorder } from \"react-icons/md\";\nimport { BsTrash } from \"react-icons/bs\";\n\nexport default function Card({ news, onClick, pocket }) {\n  const [selected, setSelected] = useState(false);\n  return (\n    <li className=\"news-card\">\n      {news.image ? (\n        <a\n          className=\"header-link\"\n          href={news.url}\n          style={{\n            backgroundImage: `url(${news.image.contentUrl})`,\n            backgroundSize: \"cover\",\n            backgroundRepeat: \"no-repeat\",\n            backgroundPosition: \"top\",\n          }}\n        >\n          {news.name}\n        </a>\n      ) : null}\n      <a href={news.url}>\n        <h2>{news.name}</h2>\n      </a>\n      <p>{news.description}</p>\n      <div className=\"bottom-wraper\">\n        <div className=\"source\">\n          {news.provider[0].image ? (\n            <img\n              style={{ width: 35 }}\n              className=\"source-thamb\"\n              src={news.provider[0].image.thumbnail.contentUrl}\n              alt={news.provider[0].name}\n            />\n          ) : null}\n          <h5>{news.provider[0].name}</h5>\n        </div>\n        <div\n          onClick={() => {\n            setSelected(!selected);\n            return onClick(news);\n          }}\n        >\n          {!pocket ? (\n            (selected && <MdBookmark />) || <MdBookmarkBorder />\n          ) : (\n            <BsTrash color={\"#bc0b0b\"} />\n          )}\n        </div>\n      </div>\n    </li>\n  );\n}\n","import React from \"react\";\nimport \"../css/slider.scss\";\n\nexport default function Slider({\n  level,\n  onSlide,\n  politicalView,\n  onSelect,\n  active,\n}) {\n  return (\n    <div className=\"slider\">\n      <input\n        type=\"checkbox\"\n        id=\"toggle\"\n        className=\"checkbox\"\n        onChange={() => onSelect()}\n      />\n      <label htmlFor=\"toggle\" className=\"switch\"></label>\n      <input\n        disabled={!active}\n        type=\"range\"\n        min=\"1\"\n        max=\"100\"\n        value={level}\n        onChange={onSlide}\n      />\n      {active ? (\n        <div className=\"view-wraper\">\n          <span>Media Political Bias:</span>\n          <span className=\"view\">{politicalView}</span>\n        </div>\n      ) : (\n        <p>\n          Activate slider to filter news providers based on politicals bias{\" \"}\n        </p>\n      )}\n    </div>\n  );\n}\n","const data = require(\"./rating.json\");\n//const availableSources = require(\"./availableSources.json\");\n\nconst leftNews = data\n  .filter((el) => el.rating === \"left\" || el.rating === \"left-center\")\n  .map((el) => el.news_source);\n\nconst rightNews = data\n  .filter((el) => el.rating === \"right\" || el.rating === \"right-center\")\n  .map((el) => el.news_source);\n\nconst neutralNews = data\n  .filter((el) => el.rating === \"center\")\n  .map((el) => el.news_source);\n\nexport const filteredSources = {\n  left: [...leftNews],\n  center: [...neutralNews],\n  right: [...rightNews],\n};\nexport const to = new Date().toJSON().slice(0, 10);\nconst yesterday = new Date();\nyesterday.setDate(yesterday.getDate() - 3);\nexport const from = yesterday.toJSON().slice(0, 10);\n","import React, { useState, useEffect } from \"react\";\nimport Card from \"./Card\";\nimport Slider from \"./Slider\";\nimport { filteredSources } from \"../functions\";\nimport \"../css/news-container.scss\";\n\nexport default function NewsContainer({\n  data,\n  loading,\n  error,\n  selectCard,\n  pocket,\n  backToFeed,\n}) {\n  const [level, setLevel] = useState(\"50\");\n  const [politicalView, setView] = useState(\"center\");\n  const [filtredData, setFiltred] = useState([]);\n  const [sliderIsActive, setActive] = useState(false);\n  const activateSlider = () => setActive(!sliderIsActive);\n  useEffect(() => {\n    if (!data) return;\n    setFiltred([]);\n    data.forEach((el) => {\n      if (pocket) {\n        setFiltred((filtredData) => [...filtredData, el]);\n      } else {\n        if (!sliderIsActive) {\n          setFiltred((filtredData) => [...filtredData, el]);\n        } else if (\n          filteredSources[politicalView].indexOf(el.provider[0].name) > -1\n        ) {\n          setFiltred((filtredData) => [...filtredData, el]);\n        }\n      }\n    });\n  }, [politicalView, data, sliderIsActive, pocket]);\n\n  useEffect(() => {\n    if (level >= 25 && level <= 75) {\n      setView(\"center\");\n    } else if (level >= 75) {\n      setView(\"right\");\n    } else setView(\"left\");\n  }, [level]);\n\n  const listitems = filtredData.map((el) => (\n    <Card key={el.id} news={el} onClick={selectCard} pocket={pocket} />\n  ));\n  if (loading) return <h1>loading</h1>;\n  if (error) return <pre>{JSON.stringify(error, null, 2)}</pre>;\n  if (!data) return null;\n  return (\n    <div className={\"container-wraper\"}>\n      <ul className={`news-container ${pocket ? \"pocket\" : null}`}>\n        {\" \"}\n        {!pocket ? (\n          <Slider\n            level={level}\n            politicalView={politicalView}\n            onSlide={(e) => setLevel(e.target.value)}\n            onSelect={activateSlider}\n            active={sliderIsActive}\n          />\n        ) : (\n          <div className=\"hello\">\n            <h2>\n              Welcome to your pocket here you can view and delete your saved\n              articles\n            </h2>\n            {data.length === 0 && (\n              <p>\n                Nothing is saved yet. Head to news feed and save some articles\n                to read later\n                <button onClick={() => backToFeed()}>Back To Feed</button>\n              </p>\n            )}\n          </div>\n        )}\n        {listitems}{\" \"}\n      </ul>\n    </div>\n  );\n}\n","import React, { useState, useEffect, useRef } from \"react\";\nimport Header from \"./components/Header\";\nimport Menu from \"./components/Menu\";\nimport NewsContainer from \"./components/NewsContainer\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nimport { MdMenu, MdClear } from \"react-icons/md\";\nimport \"./css/nav.scss\";\n\nconst HeaderStyle = {\n  backgroundColor: \"gray\",\n  height: 50,\n};\n\nconst load = (key) => key && JSON.parse(localStorage.getItem(key));\nfunction App() {\n  const wraperRef = useRef(null);\n  const [data, setData] = useState();\n  const [savedData, saveData] = useState([]);\n  const [open, setOpen] = useState(false);\n  const [selectedCat, setSelected] = useState(\"trending\");\n  const [input, setInput] = useState(\"\");\n  const [pocket, setPocket] = useState(false);\n  const [categories] = useState([\n    \"trending\",\n    \"US\",\n    \"politics\",\n    \"health\",\n    \"world\",\n    \"business\",\n    \"sport\",\n  ]);\n\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState();\n\n  //handle click outside the menu\n  useEffect(() => {\n    if (open) {\n      function clickOtsideEvent(e) {\n        if (wraperRef.current && !wraperRef.current.contains(e.target)) {\n          setOpen(false);\n        }\n      }\n      // bind event listener\n      document.addEventListener(\"mousedown\", clickOtsideEvent);\n      return () => {\n        // unbind event\n\n        document.removeEventListener(\"mousedown\", clickOtsideEvent);\n      };\n    }\n  }, [wraperRef, open]);\n\n  // open pocket on click\n  const openPocket = () => setPocket(!pocket);\n  // select category\n  const activeCat = (category) => {\n    setOpen(false);\n    setSelected(category);\n  };\n\n  /// save or remove card from the pocket\n  const selectCard = (source) => {\n    if (!savedData.some((el) => el.id === source.id)) {\n      saveData([...savedData, source]);\n    } else {\n      saveData(savedData.filter((el) => el.id !== source.id));\n    }\n  };\n\n  // search input code\n  const searchInput = (value) => setInput(value);\n  const searchSubmit = (e) => {\n    e.preventDefault();\n    setSelected(input);\n    setInput(\"\");\n    setOpen(false);\n  };\n\n  // prevent document from scrolling while menu is open\n  useEffect(() => {\n    const root = document.getElementById(\"root\");\n    if (open) {\n      root.style.overflow = \"hidden\";\n      root.style.paddingRight = \"17px\";\n    } else {\n      root.style.overflow = \"visible\";\n      root.style.paddingRight = \"0\";\n    }\n  }, [open]);\n\n  // fetch data\n  useEffect(() => {\n    const uri = `https://mybing-search.cognitiveservices.azure.com/bing/v7.0/news/search?q=${selectedCat}+news&count=100&originalImg=true`;\n    setLoading(true);\n    fetch(uri, {\n      method: \"GET\",\n      headers: {\n        \"Ocp-Apim-Subscription-Key\": process.env.REACT_APP_API_KEY,\n        \"Accept-Language\": \"en\",\n      },\n    })\n      .then((res) => res.json())\n      .then(\n        (res) => {\n          res.value.forEach((element) => (element.id = uuidv4()));\n          setData(res.value);\n        },\n        (error) => {\n          setError(error);\n        }\n      )\n\n      .then(setLoading(false));\n  }, [selectedCat]);\n  // save/load  data in the local storadge\n  useEffect(() => {\n    const data = load(\"data\");\n    if (data && data.length > 0) {\n      saveData(data);\n    }\n  }, []);\n  useEffect(() => {\n    if (savedData) {\n      localStorage.setItem(\"data\", JSON.stringify(savedData));\n    }\n  }, [savedData]);\n\n  return (\n    <>\n      <Header\n        style={HeaderStyle}\n        openPocket={openPocket}\n        pocket={pocket}\n        count={savedData.length}\n      ></Header>\n      <div className={\"nav-btn\"} onClick={(e) => setOpen(!open)}>\n        {!open ? <MdMenu /> : <MdClear />}\n      </div>\n      <Menu\n        open={open}\n        categories={categories}\n        selected={selectedCat}\n        handleClick={activeCat}\n        handleInput={searchInput}\n        handleSubmit={searchSubmit}\n        input={input}\n        wraperRef={wraperRef}\n      />\n      {\n        <NewsContainer\n          onClick={(e) => {\n            console.log(e.target);\n            open && setOpen(false);\n          }}\n          pocket={pocket}\n          savedData={null}\n          data={!pocket ? data : savedData}\n          error={error}\n          loading={loading}\n          selectCard={selectCard}\n          backToFeed={openPocket}\n        />\n      }\n    </>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"bootstrap-reboot/index.scss\";\nimport \"./css/index.scss\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}